<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Backoffice</title>
  <meta name="description" content="Backoffice">
  <meta name="author" content="Joseph">

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
  <!-- Latest compiled JavaScript -->
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

  <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style>
  .centered_wrapper {
    text-align: center;
  }
  </style>

</head>

<body>
  <div class="container-fluid">
    <div class="row-fluid">
      <table class="table" id="subscriptions">
        <thead>
          <tr>
            <th>ID</th>
            <th>Email</th>
            <th>Status</th>
            <th>Subscription Date</th>
            <th>Last Updated</th>
          </tr>
        </thead>
      </table>
    </div>
  </div>

  <form action="/backoffice/showsubscribed" method="get">
    <fieldset class="form-group">
        <button type="submit" class="btn btn-success" id="showSubscribed">Show Subscribed</button>
        <!-- <button type="button" class="btn btn-warning btn-lg">Show Unsubscribed</button>
        <button type="button" class="btn btn-primary btn-lg">Send Email to Subscribed</button> -->
    </fieldset>
  </form>
  <form action="/backoffice/showunsubscribed" method="get">
    <fieldset class="form-group">
        <button type="submit" class="btn btn-info" id="showunsubscribed">Show Unsubscribed</button>
        <!-- <button type="button" class="btn btn-warning btn-lg">Show Unsubscribed</button>
        <button type="button" class="btn btn-primary btn-lg">Send Email to Subscribed</button> -->
    </fieldset>
  </form>

  <form role="form" action="/test" method="post" id="sendEmailAll" name="sendEmailAll" target="_blank" novalidate>
    <fieldset class="form-group">
      <label for="newSubscription">Message</label>
      <input class="form-control" type="text" name="sendEmail" id="sendEmailAll" /><br/>
      <button type="submit" class="btn btn-primary" id="sendEmailAll">Send Email to Subscribed</button>
    </fieldset>
  </form>

  <form role="form" action="/backoffice/subscription/new" method="post" id="newSubscription" name="newSubscription" target="_blank" novalidate>
    <fieldset class="form-group">
      <label for="newSubscription">Email address</label>
      <input class="form-control" type="text" name="email" id="newSubscription" /><br/>
      <button type="submit" class="btn btn-primary" id="mysubmit">Add Subscription</button>
    </fieldset>
  </form>

  <script>
    var allEmails = <%- JSON.stringify(subscriptionArray) %>;
    var table = document.getElementById("subscriptions");
    allEmails.forEach(function(entry, i) {
      var row = table.insertRow(i+1);
      var cell_id = row.insertCell(0);
      var cell_email = row.insertCell(1);
      var cell_subscribed = row.insertCell(2);
      var cell_createdAt = row.insertCell(3);
      var cell_updatedAt = row.insertCell(4);
      cell_id.innerHTML = entry.id;
      cell_email.innerHTML = entry.email;
      cell_subscribed.innerHTML = entry.subscribed;
      cell_createdAt.innerHTML = entry.createdAt;
      cell_updatedAt.innerHTML = entry.updatedAt;
    });
  </script>
</body>
</html>
